#include "LED.h"


#define LED1_OFF GPIO_SetBits(LED1_GPIO, LED1_PIN)
#define LED2_OFF GPIO_SetBits(LED2_GPIO, LED2_PIN)
#define LED3_OFF GPIO_SetBits(LED3_GPIO, LED3_PIN)
#define LED4_OFF GPIO_SetBits(LED4_GPIO, LED4_PIN)

#define LED1_ON GPIO_ResetBits(LED1_GPIO, LED1_PIN)
#define LED2_ON GPIO_ResetBits(LED2_GPIO, LED2_PIN)
#define LED3_ON GPIO_ResetBits(LED3_GPIO, LED3_PIN)
#define LED4_ON GPIO_ResetBits(LED4_GPIO, LED4_PIN)

void initializeLEDGPIO()
{
	GPIO_InitTypeDef led;

	led.GPIO_Mode = GPIO_Mode_Out_PP;
	led.GPIO_Speed = GPIO_Speed_2MHz; // to save power

	// GPIOA
	led.GPIO_Pin = LED3_PIN/* | LED7_PIN | LED8_PIN*/;
	GPIO_Init(GPIOA, &led);

	// GPIOB
	led.GPIO_Pin = LED2_PIN | LED4_PIN;
	GPIO_Init(GPIOB, &led);

	// GPIOC
	led.GPIO_Pin = LED1_PIN /*| LED2_PIN | LED3_PIN | LED9_PIN | LED10_PIN*/;
	GPIO_Init(GPIOC, &led);

	// Turn on all for about 1 sec (72 000 000 -> 72 MHz )
	GPIO_SetBits(GPIOA, LED3_PIN/* | LED7_PIN | LED8_PIN*/);
	GPIO_SetBits(GPIOB, LED2_PIN | LED4_PIN);
	GPIO_SetBits(GPIOC, LED1_PIN /*| LED2_PIN | LED3_PIN | LED9_PIN | LED10_PIN*/);

	uint32_t i = 0;
	for (i = 0; i < 4000000; i++){
	}
	GPIO_ResetBits(GPIOA, LED3_PIN/* | LED7_PIN | LED8_PIN*/);
	GPIO_ResetBits(GPIOB, LED2_PIN | LED4_PIN);
	GPIO_ResetBits(GPIOC, LED1_PIN /*| LED2_PIN | LED3_PIN | LED9_PIN | LED10_PIN*/);
	for (i = 0; i < 4000000; i++){
	}

	GPIO_SetBits(GPIOA, LED3_PIN/* | LED7_PIN | LED8_PIN*/);
	GPIO_SetBits(GPIOB, LED2_PIN | LED4_PIN);
	GPIO_SetBits(GPIOC, LED1_PIN /*| LED2_PIN | LED3_PIN | LED9_PIN | LED10_PIN*/);
}

void LED_off(){
	LED1_OFF;
	LED2_OFF;
	LED3_OFF;
	LED4_OFF;
}
